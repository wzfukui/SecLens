<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    {% set page_title = title or 'SecLens' %}
    <title>{{ page_title if 'SecLens' in page_title else page_title ~ ' · SecLens' }}</title>
    {% set canonical_url = canonical_url or request.url.replace(query=None) %}
    {% set meta_description = meta_description or 'SecLens 提供全量安全情报聚合、结构化分析与自动化投递能力，帮助安全运营团队快速响应漏洞与威胁。' %}
    {% set meta_keywords = meta_keywords if meta_keywords is string else (meta_keywords | join(', ')) if meta_keywords else 'SecLens,安全情报,漏洞通告,威胁情报,安全运营,漏洞响应' %}
    {% set og_title = og_title or page_title %}
    {% set og_description = og_description or meta_description %}
    {% set meta_robots = meta_robots or 'index,follow' %}
    {% set og_type = og_type or 'website' %}
    {% set og_image = og_image or request.url_for('static', path='images/og-seclens-home.png') %}
    {% set og_url = og_url or canonical_url %}
    <link rel="canonical" href="{{ canonical_url }}">
    <meta name="description" content="{{ meta_description }}">
    <meta name="keywords" content="{{ meta_keywords }}">
    <meta name="robots" content="{{ meta_robots }}">
    <meta property="og:type" content="{{ og_type }}">
    <meta property="og:site_name" content="SecLens">
    <meta property="og:title" content="{{ og_title }}">
    <meta property="og:description" content="{{ og_description }}">
    <meta property="og:url" content="{{ og_url }}">
    <meta property="og:image" content="{{ og_image }}">
    <meta property="og:locale" content="zh_CN">
    <meta name="twitter:card" content="{{ twitter_card or 'summary_large_image' }}">
    <meta name="twitter:title" content="{{ og_title }}">
    <meta name="twitter:description" content="{{ og_description }}">
    <meta name="twitter:image" content="{{ og_image }}">
    <link rel="alternate" type="application/rss+xml" title="SecLens 情报 RSS" href="{{ request.base_url }}v1/bulletins/rss">
    {% if structured_data %}
    <script type="application/ld+json">
{{ structured_data | tojson_unicode(indent=2, sort_keys=True) }}
    </script>
    {% endif %}
    <link rel="stylesheet" href="{{ static_asset_url('bundle.css') }}">
    <style>
        header .hero {
            display: flex;
            align-items: center;
            gap: 1.5rem;
        }

        header .hero .hero-logo-link {
            display: inline-flex;
            align-items: center;
            justify-content: center;
        }

        header .hero .hero-logo {
            display: block;
            width: 72px;
            height: auto;
        }

        header .hero .hero-content {
            display: flex;
            flex-direction: column;
            gap: 0.35rem;
        }

        header .hero .hero-content h1 {
            margin: 0;
        }

        header .hero .hero-content p {
            margin: 0;
            color: rgba(255, 255, 255, 0.72);
        }

        @media (max-width: 768px) {
            header {
                flex-direction: column;
                align-items: stretch;
                gap: 1.25rem;
            }

            header .hero {
                width: 100%;
                flex-direction: column;
                align-items: flex-start;
                gap: 0.75rem;
            }

            header .hero .hero-logo {
                width: 60px;
            }

            header .hero .hero-content h1,
            header .hero .hero-content p {
                text-align: left;
            }
        }
    </style>
    {% block extra_css %}{% endblock %}
</head>
<body data-page="{{ page_id or '' }}">
<header>
    <div class="hero">
        <a href="/" class="hero-logo-link">
            <img
                src="/static/images/seclens-logo.png"
                alt="SecLens Logo"
                class="hero-logo"
                width="72"
                height="72"
                decoding="async"
            >
        </a>
        <div class="hero-content">
            {% set header_text = header or 'SecLens 情报雷达' %}
            {% set header_href = header_href if header_href is defined else '/' %}
            {% if header_href %}
                <h1><a href="{{ header_href }}">{{ header_text }}</a></h1>
            {% else %}
                <h1>{{ header_text }}</h1>
            {% endif %}
            <p>网安资讯，一网打尽。汇集权威漏洞通告与行业要闻，结合分组浏览、智能过滤、RSS订阅 和 Webhook 推送，多通道拓展您的安全情报视野。</p>
        </div>
    </div>
    <div class="global-menu">
        <button class="menu-toggle" type="button" aria-label="更多菜单" aria-expanded="false" aria-controls="global-menu-list">&hellip;</button>
        <nav class="global-menu-list" id="global-menu-list" aria-label="全局导航" data-visible="false">
            <div class="menu-group" data-group="public">
                <a href="/insights">网安资讯</a>
                <a href="/plugin-dev">插件开发</a>
                <a href="/dashboard/plugins">插件监控</a>
            </div>
            <div class="menu-divider" role="separator" aria-hidden="true"></div>
            <div class="menu-group" data-group="user">
                <a href="/login" data-auth="guest">登录或注册</a>
                <a href="/dashboard" data-auth="auth">用户中心</a>
                <a href="#" id="logout-link" data-auth="auth">退出</a>
            </div>
            <div class="menu-divider" data-admin="true" role="separator" aria-hidden="true" style="display:none"></div>
            <div class="menu-group" data-group="admin" data-admin="true" style="display:none">
                <a href="/admin">管理后台</a>
            </div>
            <div class="menu-divider" role="separator" aria-hidden="true"></div>
            <div class="menu-group" data-group="legal">
                <a href="/terms">服务协议</a>
                <a href="/privacy">隐私条款</a>
                <a href="/about">关于</a>
            </div>
        </nav>
    </div>
</header>
<main>
    {% block content %}{% endblock %}
</main>
<footer>
    SecLens 情报雷达 @ 2025 · <a href="/v1/bulletins/rss">RSS</a>
</footer>
<script type="module" src="{{ static_asset_url('bundle.js') }}"></script>
{% block extra_js %}{% endblock %}
</body>
</html>
